<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cebucouncilbsp.backend.repository.ISComDetailsRepository">

  <resultMap id="ISComDetailsResultMap" type="ISComDetailsEntity">
      <result column="ISCOM_ID" jdbcType="INTEGER" property="iSComId"/>
      <result column="FORM_ID" jdbcType="INTEGER" property="formId"/>
      <result column="POSITION_CODE" jdbcType="VARCHAR" property="positionCode"/>
      <result column="SURNAME" jdbcType="VARCHAR" property="surname"/>
      <result column="GIVEN_NAME" jdbcType="VARCHAR" property="givenName"/>
      <result column="MIDDLE_INITIAL" jdbcType="VARCHAR" property="middleInitial"/>
      <result column="SIGNATURE" jdbcType="VARCHAR" property="signature"/>
      <result column="AGE" jdbcType="INTEGER" property="age"/>
      <result column="MEMBERSHIP_CERT_NO" jdbcType="VARCHAR" property="membershipCertNo"/>
      <result column="HIGHEST_TRAINING_CODE" jdbcType="VARCHAR" property="highestTrainingCode"/>
      <result column="TENURE" jdbcType="INTEGER" property="tenure"/>
      <result column="RELIGION" jdbcType="VARCHAR" property="religion"/>
      <result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy"/>
      <result column="CREATED_DATETIME" jdbcType="TIMESTAMP" property="createdDateTime"/>
      <result column="UPDATED_BY" jdbcType="VARCHAR" property="updatedBy"/>
      <result column="UPDATED_DATETIME" jdbcType="TIMESTAMP" property="updatedDateTime"/>
  </resultMap>

  <select id="findAllISCommittee" parameterType="map" resultMap="ISComDetailsResultMap" resultType="ISComDetailsEntity">
    SELECT
      TISC.ISCOM_ID,
      TISC.FORM_ID,
      TISC.POSITION_CODE,
      TISC.SURNAME,
      TISC.GIVEN_NAME,
      TISC.MIDDLE_INITIAL,
      TISC.SIGNATURE,
      TISC.AGE,
      TISC.MEMBERSHIP_CERT_NO,
      TISC.HIGHEST_TRAINING_CODE,
      TISC.TENURE,
      TISC.RELIGION,
      TISC.CREATED_BY,
      TISC.CREATED_DATETIME,
      TISC.UPDATED_BY,
      TISC.UPDATED_DATETIME
    FROM
      T_ISCOM_DETAILS TISC
  </select>

  <select id="findByFormId" parameterType="map" resultMap="ISComDetailsResultMap" resultType="ISComDetailsEntity">
    SELECT
      TISC.ISCOM_ID,
      TISC.FORM_ID,
      TISC.POSITION_CODE,
      TISC.SURNAME,
      TISC.GIVEN_NAME,
      TISC.MIDDLE_INITIAL,
      TISC.SIGNATURE,
      TISC.AGE,
      TISC.MEMBERSHIP_CERT_NO,
      TISC.HIGHEST_TRAINING_CODE,
      TISC.TENURE,
      TISC.RELIGION,
      TISC.CREATED_BY,
      TISC.CREATED_DATETIME,
      TISC.UPDATED_BY,
      TISC.UPDATED_DATETIME
    FROM
      T_ISCOM_DETAILS TISC
    WHERE
      TISC.FORM_ID = #{formId,jdbcType=INTEGER}
  </select>

  <insert id="insertISComDetails" parameterType="ISComDetailsEntity">
    INSERT INTO
      T_ISCOM_DETAILS
    <trim prefix="(" suffix=")" suffixOverrides=",">
      ISCOM_ID,
      FORM_ID,
      POSITION_CODE,
      SURNAME,
      GIVEN_NAME,
      MIDDLE_INITIAL,
      SIGNATURE,
      AGE,
      MEMBERSHIP_CERT_NO,
      HIGHEST_TRAINING_CODE,
      TENURE,
      RELIGION
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      #{iSComId,jdbcType=INTEGER},
      #{formId,jdbcType=INTEGER},
      #{positionCode,jdbcType=VARCHAR},
      #{surname,jdbcType=VARCHAR},
      #{givenName,jdbcType=VARCHAR},
      #{middleInitial,jdbcType=VARCHAR},
      #{signature,jdbcType=VARCHAR},
      #{age,jdbcType=INTEGER},
      #{membershipCertNo,jdbcType=VARCHAR},
      #{highestTrainingCode,jdbcType=VARCHAR},
      #{tenure,jdbcType=INTEGER},
      #{religion,jdbcType=VARCHAR},
      #{createdBy,jdbcType=VARCHAR},
      #{updatedBy,jdbcType=VARCHAR},
      #{creationDateTime,jdbcType=TIMESTAMP},
      #{updatedDateTime,jdbcType=TIMESTAMP}
    </trim>
  </insert>

  <update id="updateISComDetails" parameterType="ISComDetailsEntity">
    <foreach collection="iSComList" item="entity" index="index" separator=";">
    UPDATE
      T_ISCOM_DETAILS
    <set>
      POSITION_CODE = #{entity.positionCode,jdbcType=VARCHAR},
      SURNAME = #{entity.surname,jdbcType=VARCHAR},
      GIVEN_NAME = #{entity.givenName,jdbcType=VARCHAR},
      MIDDLE_INITIAL = #{entity.middleInitial,jdbcType=VARCHAR},
      SIGNATURE = #{entity.signature,jdbcType=VARCHAR},
      AGE = #{entity.age,jdbcType=INTEGER},
      MEMBERSHIP_CERT_NO = #{entity.membershipCertNo,jdbcType=VARCHAR},
      HIGHEST_TRAINING_CODE = #{entity.highestTrainingCode,jdbcType=VARCHAR},
      TENURE = #{entity.tenure,jdbcType=INTEGER},
      RELIGION = #{entity.religion,jdbcType=VARCHAR},
      UPDATED_BY = #{entity.updatedBy,jdbcType=VARCHAR},
      UPDATED_DATETIME = #{entity.updatedDateTime,jdbcType=TIMESTAMP}
    </set>
    WHERE
      ISCOM_ID = #{entity.iSComId,jdbcType=INTEGER}
      AND FORM_ID = #{entity.formId,jdbcType=INTEGER}
    </foreach>
  </update>

</mapper>
