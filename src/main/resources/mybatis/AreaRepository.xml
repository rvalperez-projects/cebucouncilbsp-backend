<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cebucouncilbsp.backend.repository.AreaRepository">

  <resultMap id="AreaEntityResultMap" type="AreaEntity">
    <id column="AREA_CODE" jdbcType="VARCHAR" property="areaCode"/>
    <result column="DISTRICT_NAME" jdbcType="VARCHAR" property="districtName"/>
    <result column="CHAIRMAN_NAME" jdbcType="VARCHAR" property="chairmanName"/>
    <result column="CHAIRMAN_CONTACT_NO" jdbcType="VARCHAR" property="chairmanContactNo"/>
    <result column="COMMISSIONER_NAME" jdbcType="VARCHAR" property="commissionerName"/>
    <result column="COMMISSIONER_CONTACT_NO" jdbcType="VARCHAR" property="commissionerContactNo"/>
    <result column="REMARKS" jdbcType="VARCHAR" property="remarks"/>
    <result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy"/>
    <result column="CREATED_DATETIME" jdbcType="TIMESTAMP" property="createdDateTime"/>
    <result column="UPDATED_BY" jdbcType="VARCHAR" property="updatedBy"/>
    <result column="UPDATED_DATETIME" jdbcType="TIMESTAMP" property="updatedDateTime"/>
  </resultMap>

  <select id="findAllAreas" parameterType="map" resultMap="AreaEntityResultMap" resultType="AreaEntity">
    SELECT
      AREA_CODE,
      DISTRICT_NAME,
      CHAIRMAN_NAME,
      CHAIRMAN_CONTACT_NO,
      COMMISSIONER_NAME,
      COMMISSIONER_CONTACT_NO,
      REMARKS,
      CREATED_BY,
      CREATED_DATETIME,
      UPDATED_BY,
      UPDATED_DATETIME
    FROM
      M_AREA
    WHERE
      VALID_FLAG = true
    ORDER BY
      AREA_CODE ASC
  </select>

  <select id="findDistinctAreas" parameterType="map" resultMap="AreaEntityResultMap" resultType="AreaEntity">
    SELECT
      AREA_CODE
    FROM
      M_AREA
    WHERE
      VALID_FLAG = true
    GROUP BY
      AREA_CODE
    ORDER BY
      AREA_CODE ASC
  </select>

  <select id="findByArea" parameterType="map" resultMap="AreaEntityResultMap" resultType="AreaEntity">
    SELECT
      AREA_CODE,
      DISTRICT_NAME,
      CHAIRMAN_NAME,
      CHAIRMAN_CONTACT_NO,
      COMMISSIONER_NAME,
      COMMISSIONER_CONTACT_NO,
      REMARKS,
      CREATED_BY,
      CREATED_DATETIME,
      UPDATED_BY,
      UPDATED_DATETIME
    FROM
      M_AREA
    WHERE
      AREA_CODE = #{area,jdbcType=VARCHAR}
      AND VALID_FLAG = true
    ORDER BY
      AREA_CODE ASC
  </select>

  <select id="findByDistrict" parameterType="map" resultMap="AreaEntityResultMap" resultType="AreaEntity">
    SELECT
      AREA_CODE,
      DISTRICT_NAME,
      CHAIRMAN_NAME,
      CHAIRMAN_CONTACT_NO,
      COMMISSIONER_NAME,
      COMMISSIONER_CONTACT_NO,
      REMARKS,
      VALID_FLAG,
      CREATED_BY,
      CREATED_DATETIME,
      UPDATED_BY,
      UPDATED_DATETIME
    FROM
      M_AREA
    WHERE
      DISTRICT_NAME = #{district,jdbcType=VARCHAR}
      AND VALID_FLAG = true
    ORDER BY
      AREA_CODE ASC
  </select>

  <select id="findByAreaAndDistrict" parameterType="map" resultMap="AreaEntityResultMap" resultType="AreaEntity">
    SELECT
      AREA_CODE,
      DISTRICT_NAME,
      CHAIRMAN_NAME,
      CHAIRMAN_CONTACT_NO,
      COMMISSIONER_NAME,
      COMMISSIONER_CONTACT_NO,
      REMARKS,
      VALID_FLAG,
      CREATED_BY,
      CREATED_DATETIME,
      UPDATED_BY,
      UPDATED_DATETIME
    FROM
      M_AREA
    WHERE
      AREA_CODE = #{area,jdbcType=VARCHAR}
      AND DISTRICT_NAME = #{district,jdbcType=VARCHAR}
      AND VALID_FLAG = true
    ORDER BY
      AREA_CODE ASC
  </select>

  <insert id="insertArea" parameterType="AreaEntity">
    INSERT INTO
      M_AREA
    <trim prefix="(" suffix=")" suffixOverrides=",">
      AREA_CODE,
      DISTRICT_NAME,
      CHAIRMAN_NAME,
      CHAIRMAN_CONTACT_NO,
      COMMISSIONER_NAME,
      COMMISSIONER_CONTACT_NO,
      REMARKS,
      VALID_FLAG,
      CREATED_BY,
      CREATED_DATETIME,
      UPDATED_BY,
      UPDATED_DATETIME
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      #{area,jdbcType=VARCHAR},
      #{district,jdbcType=VARCHAR},
      #{chairmanName,jdbcType=VARCHAR},
      #{chairmanContactNo,jdbcType=VARCHAR},
      #{commissionerName,jdbcType=VARCHAR},
      #{commissionerContactNo,jdbcType=VARCHAR},
      #{remarks,jdbcType=VARCHAR},
      #{validFlag,jdbcType=BOOLEAN},
      #{createdBy,jdbcType=VARCHAR},
      #{updatedBy,jdbcType=VARCHAR},
      #{creationDateTime,jdbcType=TIMESTAMP},
      #{updatedDateTime,jdbcType=TIMESTAMP}
    </trim>
  </insert>

  <update id="updateAreaByAreaAndDistrict" parameterType="AreaEntity">
    UPDATE
      M_AREA
    <set>
      CHAIRMAN_NAME = #{chairmanName,jdbcType=VARCHAR},
      CHAIRMAN_CONTACT_NO = #{chairmanContactNo,jdbcType=VARCHAR},
      COMMISSIONER_NAME = #{commissionerName,jdbcType=VARCHAR},
      COMMISSIONER_CONTACT_NO = #{commissionerContactNo,jdbcType=VARCHAR},
      REMARKS = #{remarks,jdbcType=VARCHAR},
      VALID_FLAG = #{validFlag,jdbcType=BOOLEAN},
      UPDATED_BY = #{updatedBy,jdbcType=VARCHAR},
      UPDATED_DATETIME = #{updatedDateTime,jdbcType=TIMESTAMP}
    </set>
    WHERE
      AREA_CODE = #{userId,jdbcType=INTEGER}
      AND DISTRICT_NAME = #{district,jdbcType=VARCHAR},
  </update>

</mapper>
